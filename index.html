<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UK University Roadmap</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState } = React;
    const { CheckCircle2, Circle, ChevronDown, ChevronUp, Calendar, FileText, Building2, GraduationCap, Home, Plane, AlertCircle, Plus, X, Edit2, Save } = lucide;

    function UniversityRoadmap() {
      const [expandedSteps, setExpandedSteps] = useState({});
      const [completedTasks, setCompletedTasks] = useState({});
      const [editingTask, setEditingTask] = useState(null);
      const [editText, setEditText] = useState('');
      const [addingTaskTo, setAddingTaskTo] = useState(null);
      const [newTaskText, setNewTaskText] = useState('');
      
      const [roadmapSteps, setRoadmapSteps] = useState([
        {
          id: 'scholarships',
          title: 'Review and Apply for Scholarships',
          deadline: 'ASAP - Early March',
          icon: GraduationCap,
          color: 'bg-blue-500',
          tasks: [
            { id: 'lse-review', text: 'LSE - Review scholarships', subtaskOf: 'lse' },
            { id: 'lse-apply', text: 'LSE - Apply for scholarships', subtaskOf: 'lse' },
            { id: 'bristol-review', text: 'Bristol - Review scholarships', subtaskOf: 'bristol' },
            { id: 'bristol-apply', text: 'Bristol - Apply for scholarships', subtaskOf: 'bristol' },
            { id: 'cardiff-review', text: 'Cardiff - Review scholarships', subtaskOf: 'cardiff' },
            { id: 'cardiff-apply', text: 'Cardiff - Apply for scholarships', subtaskOf: 'cardiff' },
            { id: 'nottingham-review', text: 'Nottingham - Review scholarships', subtaskOf: 'nottingham' },
            { id: 'nottingham-apply', text: 'Nottingham - Apply for scholarships', subtaskOf: 'nottingham' },
            { id: 'leeds-review', text: 'Leeds - Review scholarships', subtaskOf: 'leeds' },
            { id: 'leeds-apply', text: 'Leeds - Apply for scholarships', subtaskOf: 'leeds' },
            { id: 'york-review', text: 'York - Review scholarships', subtaskOf: 'york' },
            { id: 'york-apply', text: 'York - Apply for scholarships', subtaskOf: 'york' },
          ]
        },
        {
          id: 'fiderh',
          title: 'FIDERH',
          deadline: 'Check specific deadlines',
          icon: FileText,
          color: 'bg-purple-500',
          tasks: [
            { id: 'fiderh-1', text: 'Documentos de solicitud' },
            { id: 'fiderh-2', text: 'Documentos del solicitante' },
            { id: 'fiderh-3', text: 'Antecedente acadÃ©micos del solicitante' },
            { id: 'fiderh-4', text: 'Documentos de estudios a realizar' },
            { id: 'fiderh-5', text: 'Documentos generales del aval' },
            { id: 'fiderh-6', text: 'Documentos del inmueble' },
          ]
        },
        {
          id: 'conahcyt',
          title: 'CONAHCYT (SECIHTI)',
          deadline: 'Wait for announcement',
          icon: Building2,
          color: 'bg-green-500',
          tasks: [
            { id: 'conahcyt-1', text: 'Esperar a que abra convocatoria' },
          ]
        },
        {
          id: 'visa',
          title: 'Visa Application',
          deadline: 'After receiving CAS',
          icon: Plane,
          color: 'bg-yellow-500',
          tasks: [
            { id: 'visa-1', text: 'Recibir CAS' },
            { id: 'visa-2', text: 'Contestar encuesta del consulado de UK' },
            { id: 'visa-3', text: 'Pagar Visa y NHS' },
            { id: 'visa-4', text: 'Hacer cita de datos biomÃ©tricos' },
          ]
        },
        {
          id: 'house',
          title: 'Buscar casa con Joanita',
          deadline: 'Before September',
          icon: Home,
          color: 'bg-pink-500',
          tasks: [
            { id: 'house-1', text: 'Budget' },
            { id: 'house-2', text: 'CercanÃ­a' },
            { id: 'house-3', text: 'Comfy' },
            { id: 'house-4', text: 'Love' },
          ]
        },
        {
          id: 'move-uk',
          title: 'Mudarme a UK',
          deadline: 'September 2026',
          icon: Plane,
          color: 'bg-red-500',
          tasks: [
            { id: 'move-1', text: 'Vivir con el amor de mi vida (Joanita)' },
            { id: 'move-2', text: 'Ser feliz' },
            { id: 'move-3', text: 'Estar tranquilo' },
          ]
        },
      ]);

      const toggleStep = (stepId) => {
        setExpandedSteps(prev => ({
          ...prev,
          [stepId]: !prev[stepId]
        }));
      };

      const toggleTask = (taskId) => {
        setCompletedTasks(prev => ({
          ...prev,
          [taskId]: !prev[taskId]
        }));
      };

      const startEditingTask = (stepId, taskId, currentText) => {
        setEditingTask({ stepId, taskId });
        setEditText(currentText);
      };

      const saveEditTask = () => {
        if (editText.trim()) {
          setRoadmapSteps(prev => prev.map(step => {
            if (step.id === editingTask.stepId) {
              return {
                ...step,
                tasks: step.tasks.map(task => 
                  task.id === editingTask.taskId ? { ...task, text: editText.trim() } : task
                )
              };
            }
            return step;
          }));
        }
        setEditingTask(null);
        setEditText('');
      };

      const deleteTask = (stepId, taskId) => {
        setRoadmapSteps(prev => prev.map(step => {
          if (step.id === stepId) {
            return {
              ...step,
              tasks: step.tasks.filter(task => task.id !== taskId)
            };
          }
          return step;
        }));
        setCompletedTasks(prev => {
          const newCompleted = { ...prev };
          delete newCompleted[taskId];
          return newCompleted;
        });
      };

      const addTask = (stepId) => {
        if (newTaskText.trim()) {
          const newTaskId = `${stepId}-${Date.now()}`;
          setRoadmapSteps(prev => prev.map(step => {
            if (step.id === stepId) {
              return {
                ...step,
                tasks: [...step.tasks, { id: newTaskId, text: newTaskText.trim() }]
              };
            }
            return step;
          }));
          setNewTaskText('');
          setAddingTaskTo(null);
        }
      };

      const completedCount = Object.values(completedTasks).filter(Boolean).length;
      const totalTasks = roadmapSteps.reduce((sum, step) => sum + step.tasks.length, 0);
      const progress = Math.round((completedCount / totalTasks) * 100);

      return (
        <div className="min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 p-4 md:p-8">
          <div className="max-w-4xl mx-auto">
            {/* Header */}
            <div className="bg-white rounded-2xl shadow-xl p-6 md:p-8 mb-6">
              <h1 className="text-3xl md:text-4xl font-bold text-gray-800 mb-2">
                ðŸŽ“ UK University Roadmap (for the love of my life)
              </h1>
              <p className="text-gray-600 mb-4">
                Track your journey from 6 offers to university student
              </p>
              
              {/* Progress Bar */}
              <div className="bg-gray-100 rounded-full h-4 overflow-hidden">
                <div 
                  className="bg-gradient-to-r from-blue-500 to-purple-500 h-full transition-all duration-500 flex items-center justify-end pr-2"
                  style={{ width: `${progress}%` }}
                >
                  {progress > 10 && (
                    <span className="text-xs font-bold text-white">{progress}%</span>
                  )}
                </div>
              </div>
              <p className="text-sm text-gray-600 mt-2">
                {completedCount} of {totalTasks} tasks completed
              </p>
            </div>

            {/* Roadmap Steps */}
            <div className="space-y-4">
              {roadmapSteps.map((step, index) => {
                const Icon = step.icon;
                const isExpanded = expandedSteps[step.id];
                const stepCompletedTasks = step.tasks.filter(task => completedTasks[task.id]).length;
                const stepProgress = Math.round((stepCompletedTasks / step.tasks.length) * 100);

                return (
                  <div key={step.id} className="bg-white rounded-xl shadow-lg overflow-hidden">
                    {/* Step Header */}
                    <button
                      onClick={() => toggleStep(step.id)}
                      className="w-full p-6 flex items-start gap-4 hover:bg-gray-50 transition-colors"
                    >
                      <div className={`${step.color} rounded-full p-3 text-white flex-shrink-0`}>
                        <Icon size={24} />
                      </div>
                      
                      <div className="flex-1 text-left">
                        <div className="flex items-start justify-between gap-2">
                          <h2 className="text-xl font-bold text-gray-800">
                            {index + 1}. {step.title}
                          </h2>
                          {isExpanded ? <ChevronUp className="text-gray-400" /> : <ChevronDown className="text-gray-400" />}
                        </div>
                        
                        <p className="text-sm text-gray-600 mt-1 flex items-center gap-1">
                          <Calendar size={14} />
                          {step.deadline}
                        </p>
                        
                        {/* Mini Progress */}
                        <div className="mt-3">
                          <div className="bg-gray-200 rounded-full h-2 overflow-hidden">
                            <div 
                              className={`${step.color} h-full transition-all duration-500`}
                              style={{ width: `${stepProgress}%` }}
                            />
                          </div>
                          <p className="text-xs text-gray-500 mt-1">
                            {stepCompletedTasks}/{step.tasks.length} tasks completed
                          </p>
                        </div>
                      </div>
                    </button>

                    {/* Task List */}
                    {isExpanded && (
                      <div className="px-6 pb-6 space-y-2 bg-gray-50">
                        {step.tasks.map(task => (
                          <div key={task.id}>
                            {editingTask?.taskId === task.id ? (
                              <div className="flex items-center gap-2 p-3 bg-white rounded-lg">
                                <input
                                  type="text"
                                  value={editText}
                                  onChange={(e) => setEditText(e.target.value)}
                                  className="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                  autoFocus
                                  onKeyDown={(e) => {
                                    if (e.key === 'Enter') saveEditTask();
                                    if (e.key === 'Escape') setEditingTask(null);
                                  }}
                                />
                                <button
                                  onClick={saveEditTask}
                                  className="p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors"
                                >
                                  <Save size={18} />
                                </button>
                                <button
                                  onClick={() => setEditingTask(null)}
                                  className="p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors"
                                >
                                  <X size={18} />
                                </button>
                              </div>
                            ) : (
                              <div className="flex items-start gap-3 p-3 rounded-lg hover:bg-white transition-colors group">
                                <button
                                  onClick={() => toggleTask(task.id)}
                                  className="flex items-start gap-3 flex-1 text-left"
                                >
                                  {completedTasks[task.id] ? (
                                    <CheckCircle2 className="text-green-500 flex-shrink-0 mt-0.5" size={20} />
                                  ) : (
                                    <Circle className="text-gray-300 group-hover:text-gray-400 flex-shrink-0 mt-0.5" size={20} />
                                  )}
                                  <span className={`${completedTasks[task.id] ? 'text-gray-400 line-through' : 'text-gray-700'}`}>
                                    {task.text}
                                  </span>
                                </button>
                                <div className="flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                                  <button
                                    onClick={() => startEditingTask(step.id, task.id, task.text)}
                                    className="p-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors"
                                    title="Edit task"
                                  >
                                    <Edit2 size={14} />
                                  </button>
                                  <button
                                    onClick={() => deleteTask(step.id, task.id)}
                                    className="p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors"
                                    title="Delete task"
                                  >
                                    <X size={14} />
                                  </button>
                                </div>
                              </div>
                            )}
                          </div>
                        ))}
                        
                        {/* Add Task Section */}
                        {addingTaskTo === step.id ? (
                          <div className="flex items-center gap-2 p-3 bg-white rounded-lg border-2 border-dashed border-blue-300">
                            <input
                              type="text"
                              value={newTaskText}
                              onChange={(e) => setNewTaskText(e.target.value)}
                              placeholder="New task..."
                              className="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                              autoFocus
                              onKeyDown={(e) => {
                                if (e.key === 'Enter') addTask(step.id);
                                if (e.key === 'Escape') {
                                  setAddingTaskTo(null);
                                  setNewTaskText('');
                                }
                              }}
                            />
                            <button
                              onClick={() => addTask(step.id)}
                              className="p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors"
                            >
                              <Save size={18} />
                            </button>
                            <button
                              onClick={() => {
                                setAddingTaskTo(null);
                                setNewTaskText('');
                              }}
                              className="p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors"
                            >
                              <X size={18} />
                            </button>
                          </div>
                        ) : (
                          <button
                            onClick={() => setAddingTaskTo(step.id)}
                            className="w-full flex items-center gap-2 p-3 rounded-lg border-2 border-dashed border-gray-300 hover:border-blue-400 hover:bg-blue-50 transition-colors text-gray-500 hover:text-blue-600"
                          >
                            <Plus size={18} />
                            <span className="text-sm font-medium">Add task</span>
                          </button>
                        )}
                      </div>
                    )}
                  </div>
                );
              })}
            </div>

            {/* Footer Tips */}
            <div className="mt-8 bg-blue-50 border-l-4 border-blue-500 rounded-lg p-6">
              <h3 className="font-bold text-blue-900 mb-2">ðŸ’¡ Quick Tips</h3>
              <ul className="text-sm text-blue-800 space-y-1">
                <li>â€¢ Click on any task to mark it as complete</li>
                <li>â€¢ Hover over tasks to edit or delete them</li>
                <li>â€¢ Click "Add task" at the bottom of each section to add new items</li>
                <li>â€¢ Start scholarship applications early - some close in spring</li>
                <li>â€¢ Keep all documents organized for FIDERH and visa applications</li>
              </ul>
            </div>
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<UniversityRoadmap />);
  </script>
</body>
</html>
